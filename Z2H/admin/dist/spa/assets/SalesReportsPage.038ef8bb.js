import{r as s,c as f,l as C,m as $,q as o,d as t,aM as v,M as D,A as g,n as u,F as B,Q as x,v as R,x as A,t as E,u as L}from"./index.5c8a47da.js";import{Q as P,j}from"./QSelect.a5799075.js";import{Q as O}from"./QTd.146b3053.js";import{Q as Y}from"./QTable.32b47f6a.js";import{u as G,Q as z}from"./QSpinnerFacebook.d7b9839a.js";import{u as H}from"./general.57750345.js";import{e as J}from"./exportToExcel.4db6e6be.js";import"./format.6e0d4b5c.js";import"./QList.4a0a137f.js";import"./QMarkupTable.d9075105.js";import"./axios.998f97b8.js";const K={class:"row q-pt-md q-ml-lg"},W={class:"col-2"},X=o("p",{style:{color:"#123499"},class:"text-bold"},"Sales From Date",-1),Z={class:"col-2"},ee=o("p",{style:{color:"#123499"},class:"text-bold"},"Sales To Date",-1),le={class:"col-2"},re=o("p",{style:{color:"#123499"},class:"text-bold"},"Courier Status",-1),ae={class:"col-2 q-ml-lg q-mt-lg"},te={class:"q-ml-md q-mt-lg q-mr-lg q-pa-md"},oe={class:"row justify-start items-center"},se=o("span",{class:"q-ml-sm"},null,-1),he={__name:"SalesReportsPage",setup(ne){const w=H();let N=[{name:"salesId",required:!0,label:"Sales ID",align:"left",field:r=>r.order_id,format:r=>`${r}`,sortable:!0},{name:"salesDate",label:"Sales Date",field:"order_date",sortable:!0,align:"center"},{name:"customerNumber",label:"Customer ID",field:"customer_number",align:"center"},{name:"customerName",label:"Customer Name",field:"customer_name",align:"center"},{name:"customerMobileNumber",label:"Customer Mobile Number",field:"mobile_number",align:"center"},{name:"uplineId",label:"Upline Id",field:"referrer_id",align:"center"},{name:"referrerName",label:"Upline Name",field:"referrer_name",align:"center"},{name:"referrerMobileNumber",label:"Upline Mobile Number",field:"referrer_mobile_number",align:"center"},{name:"courierStatus",label:"Courier Status",field:"order_status",align:"center"},{name:"deliveryNumber",label:"Courier Tracking Number",field:"delivery_number",align:"center"},{name:"deliveryThrough",label:"Courier Company",field:"delivery_through",align:"center"},{name:"deliveryDate",label:"Delivery Date",field:"delivery_date",align:"center"}],h=[{label:"all",name:"All"},{label:"yet_to_be_couriered",name:"Yet to be Couriered"},{label:"in_transit",name:"In transit"},{label:"delivered",name:"Delivered"},{label:"cancelled",name:"Cancelled"}];const n=s(""),i=s(""),d=s("All"),m=s([]),q=s(N),c=s([]),p=s(""),b=s(!1),_=G(),V=f(()=>h.map(r=>r.name)),Q=f(()=>!n.value||!i.value),k=f(()=>h.find(e=>e.name===d.value).label),S=()=>{_.loading.show({spinner:z,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},y=()=>{_.loading.hide()},I=r=>r==="Yet to be Couriered"?"orange":r==="In Transit"?"purple":r==="Delivered"?"green":"red",T=()=>{S();let r={fromDate:n.value,toDate:i.value,orderStatus:k.value};w.getOrders(r).then(e=>{m.value=e.data}).catch(e=>{console.log("errror",e)}).finally(()=>{y()})},U=()=>{if(i.value<=n.value){_.notify({message:"Sales From Date should be less than or equal to Sales To Date!!!",type:"warning",position:"top"});return}c.value=[],T()},M=()=>{S();let e=`Sales_${d.value.replace(/ /g,"_")}_from_${n.value}_to_${i.value}.xlsx`,l=[];for(let a of m.value){let F={"Sales Id":a.order_number,"Sales Date":a.order_date,"Customer ID":a.customer_number,"Customer Name":a.customer_name,"Customer Mobile Number":a.mobile_number,"Upline ID":a.referrer_id,"Upline Name":a.referrer_name,"Upline Mobile Number":a.referrer_mobile_number,"Courier Status":a.order_status,"Courier Tracking Number":a.delivery_number,"Courier Company":a.delivery_through,"Delivery Date":a.delivery_date};l.push(F)}J(l,e),y()};return(r,e)=>(C(),$(B,null,[o("div",K,[o("div",W,[X,t(v,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),style:{"max-width":"150px"},outlined:"",dense:"",autofocus:"",type:"date"},null,8,["modelValue"])]),o("div",Z,[ee,t(v,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),style:{"max-width":"150px"},outlined:"",dense:"",autofocus:"",type:"date"},null,8,["modelValue"])]),o("div",le,[re,t(P,{filled:"",dense:"",style:{width:"200px","max-height":"100px"},modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),options:D(V)},null,8,["modelValue","options"])]),o("div",ae,[t(g,{unelevated:"",color:"primary",label:"Search","no-caps":"",disable:D(Q),onClick:U},null,8,["disable"])])]),o("div",te,[t(g,{color:"green",class:"q-mb-md",style:{width:"20px"},"no-caps":"",onClick:M},{default:u(()=>[o("div",oe,[t(x,{name:"fas fa-file-excel"}),se])]),_:1}),t(Y,{class:"sales-table",flat:"",bordered:"",title:"Sales",rows:m.value,columns:q.value,"row-key":"order_id",selection:"multiple",selected:c.value,"onUpdate:selected":e[5]||(e[5]=l=>c.value=l),filter:p.value},{"top-right":u(()=>[b.value?(C(),R(v,{key:0,filled:"",borderless:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=l=>p.value=l),placeholder:"Search"},{append:u(()=>[t(x,{name:"search"})]),_:1},8,["modelValue"])):A("",!0),t(g,{class:"q-ml-sm",icon:"filter_list",onClick:e[4]||(e[4]=l=>b.value=!b.value),flat:""})]),"body-cell-courierStatus":u(l=>[t(O,{props:l},{default:u(()=>[t(j,{color:I(l.row.order_status),"text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:u(()=>[E(L(l.row.order_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","selected","filter"])])],64))}};export{he as default};
