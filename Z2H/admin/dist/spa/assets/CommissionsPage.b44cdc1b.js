import{_ as j,r as a,c as Y,l as D,m as G,q as n,d as o,aM as A,M as N,A as v,n as l,v as k,x as R,F as H,Q,t as i,u as r,aa as J,ab as K}from"./index.c822f9b0.js";import{Q as x,j as u}from"./QSelect.30415dcc.js";import{Q as m}from"./QTd.97012c36.js";import{Q as W}from"./QTable.c6a0c61c.js";import{u as X,Q as Z}from"./QSpinnerFacebook.173d39e4.js";import{u as ee}from"./axios.2c985eff.js";import{e as oe}from"./exportToExcel.602deb22.js";import{e as le}from"./editCommissionDetailsModal.63ac065a.js";import"./format.65b096e9.js";import"./QList.df78d7a2.js";import"./QMarkupTable.64b2e607.js";import"./TouchPan.54530d87.js";import"./touch.3df10340.js";import"./QScrollArea.fcae44dc.js";import"./QResizeObserver.230413fd.js";import"./QScrollObserver.88406e47.js";import"./QForm.5279d460.js";const p=f=>(J("data-v-53540b38"),f=f(),K(),f),te={class:"row q-pt-md q-ml-lg"},se={class:"col-1 comp-size"},ae=p(()=>n("p",{style:{color:"#123499"},class:"text-bold"},"From Date",-1)),ne={class:"col-1 comp-size"},me=p(()=>n("p",{style:{color:"#123499"},class:"text-bold"},"To Date",-1)),ie={class:"col-1 comp-size"},re=p(()=>n("p",{style:{color:"#123499"},class:"text-bold"},"Commission Level",-1)),ue={class:"col-1 comp-size"},_e=p(()=>n("p",{style:{color:"#123499"},class:"text-bold"},"Paid Status",-1)),de={class:"col-1 q-ml-lg q-mt-lg"},ce={class:"q-ml-md q-mt-sm q-mr-lg q-pa-md"},ve={class:"row justify-start items-center"},pe=p(()=>n("span",{class:"q-ml-sm"},null,-1)),fe={__name:"CommissionsPage",setup(f){const I=ee(),_=a(null),d=a(null),b=a("All"),C=a("All"),U=a(["All","Paid","Yet to be paid","Issue with payments"]),$=a(["All","One","Two","Three","Four"]),h=a(""),y=a(!1),c=a(!1),P=a([]),L=a([{name:"customerNumber",required:!0,label:"Customer ID",align:"left",field:s=>s.customer_number,format:s=>`${s}`,sortable:!0},{name:"customerName",label:"Customer Name",field:"customer_name",sortable:!0,align:"left"},{name:"mobileNumber",label:"Mobile Number",field:"mobile_number",sortable:!0,align:"left"},{name:"bankName",label:"Bank Name",field:"name_of_bank",align:"left"},{name:"accountNumber",label:"Account Number",field:"account_number",align:"left"},{name:"ifscCode",label:"IFSC Code",field:"ifsc_code",align:"left"},{name:"pan",label:"PAN",field:"pan",align:"left"},{name:"plan",label:"Plan",field:"plan",align:"left"},{name:"registrationFee",label:"Registration Fee (Rs.)",field:"registration_fee",align:"center"},{name:"commissionFromDate",label:"Commission From Date",field:"commission_from_date",sortable:!0,align:"left"},{name:"commissionToDate",label:"Commission To Date",field:"commission_to_date",sortable:!0,align:"left"},{name:"levelOneCompletionStatus",label:"Completion (1st)",field:"level_one_completion_status",align:"center"},{name:"levelOneCompletionDate",label:"Completion Date (1st)",field:"level_one_completion_date",align:"left"},{name:"levelOneCommissionAmount",label:"Commission Amount (1st) (Rs.)",field:"level_one_commission_amount",align:"center"},{name:"levelOneTdsAmount",label:"TDS Amount (1st) (10%) (Rs.)",field:"level_one_tds_amount",align:"center"},{name:"levelOneAmountPayable",label:"Amount Payable (1st) (Rs.)",field:"level_one_amount_payable",align:"center"},{name:"levelOneCommissionPaidStatus",label:"Commission Payment (1st)",field:"level_one_commission_paid_status",sortable:!0,align:"center"},{name:"levelOneCommisionPaidDate",label:"Commission Paid Date (1st)",field:"level_one_commission_paid_date",sortable:!0,align:"center"},{name:"levelOneCommissionPaymentComments",label:"Commission Payment Comments (1st)",field:"level_one_payment_comments",align:"center"},{name:"levelTwoCompletionStatus",label:"Completion (2nd)",field:"level_two_completion_status",align:"center"},{name:"levelTwoCompletionDate",label:"Completion Date (2nd)",field:"level_two_completion_date",align:"left"},{name:"levelTwoCommissionAmount",label:"Commission Amount (2nd) (Rs.)",field:"level_two_commission_amount",align:"center"},{name:"levelTwoTdsAmount",label:"TDS Amount (2nd) (10%) (Rs.)",field:"level_two_tds_amount",align:"center"},{name:"levelTwoAmountPayable",label:"Amount Payable (2nd) (Rs.)",field:"level_two_amount_payable",align:"center"},{name:"levelTwoCommissionPaidStatus",label:"Commission Payment (2nd)",field:"level_two_commission_paid_status",sortable:!0,align:"center"},{name:"levelTwoCommisionPaidDate",label:"Commission Paid Date (2nd)",field:"level_two_commission_paid_date",sortable:!0,align:"center"},{name:"levelTwoCommissionPaymentComments",label:"Commission Payment Comments (2nd)",field:"level_two_payment_comments",align:"left"},{name:"levelThreeCompletionStatus",label:"Completion (3rd)",field:"level_three_completion_status",align:"center"},{name:"levelThreeCompletionDate",label:"Completion Date (3rd)",field:"level_three_completion_date",align:"center"},{name:"levelThreeCommissionAmount",label:"Commission Amount (3rd) (Rs.)",field:"level_three_commission_amount",align:"center"},{name:"levelThreeTdsAmount",label:"TDS Amount (3rd) (10%) (Rs.)",field:"level_three_tds_amount",align:"center"},{name:"levelThreeAmountPayable",label:"Amount Payable (3rd) (Rs.)",field:"level_three_amount_payable",align:"center"},{name:"levelThreeCommissionPaidStatus",label:"Commission Payment (3rd)",field:"level_three_commission_paid_status",sortable:!0,align:"center"},{name:"levelThreeCommisionPaidDate",label:"Commission Paid Date (3rd)",field:"level_three_commission_paid_date",sortable:!0,align:"center"},{name:"levelThreeCommissionPaymentComments",label:"Commission Payment Comments (3rd)",field:"level_three_payment_comments",align:"left"},{name:"levelFourCompletionStatus",label:"Completion (4th)",field:"level_four_completion_status",align:"center"},{name:"levelFourCompletionDate",label:"Completion Date (4th)",field:"level_four_completion_date",align:"center"},{name:"levelFourCommissionAmount",label:"Commission Amount (4th) (Rs.)",field:"level_four_commission_amount",align:"center"},{name:"levelFourTdsAmount",label:"TDS Amount (4th) (10%) (Rs.)",field:"level_four_tds_amount",align:"center"},{name:"levelFourAmountPayable",label:"Amount Payable (4th) (Rs.)",field:"level_four_amount_payable",align:"center"},{name:"levelFourCommissionPaidStatus",label:"Commission Payment (4th)",field:"level_four_commission_paid_status",sortable:!0,align:"center"},{name:"levelFourCommisionPaidDate",label:"Commission Paid Date (4th)",field:"level_four_commission_paid_date",sortable:!0,align:"center"},{name:"levelFourCommissionPaymentComments",label:"Commission Payment Comments (4th)",field:"level_four_payment_comments",align:"left"},{name:"userStatus",label:"User Status",field:"user_status",align:"center"},{name:"actions",label:"Actions",field:"",align:"center"}]),T=a([]),S=a(["customerNumber","customerName","levelOneCompletionStatus","levelOneCommissionPaidStatus","levelTwoCompletionStatus","levelTwoCommissionPaidStatus","levelThreeCompletionStatus","levelThreeCommissionPaidStatus","levelFourCompletionStatus","levelFourCommissionPaidStatus","userStatus","actions"]),w=X(),B=Y(()=>!_.value||!d.value),F=()=>{w.loading.show({spinner:Z,spinnerColor:"light-blue",messageColor:"white",backgroundColor:"light-blue",message:""})},q=()=>{w.loading.hide()},E=s=>{c.value=!0,P.value=s.row},M=s=>{c.value=!1,s===!0&&(P.value=[],V())},g=s=>s=="Paid"?"green":s=="Payment Issue"?"brown":"red",V=()=>{if(d.value<_.value){w.notify({message:"Commission From Date should be less than or equal to Commission To Date!!!",type:"warning",position:"top"});return}F();let s={commission_from_date:_.value,commission_to_date:d.value,commission_status:b.value,commission_level:C.value};I.getCommissionDetails(s).then(t=>{T.value=t.data.commissions}).catch(t=>{console.log("err",t)}).finally(()=>{q()})},z=()=>{F();let s=`Commissions_level_${C.value}_${b.value}_payment_status_${_.value}_to_${d.value}.xlsx`,t=[];for(let e of T.value){let O={"Customer Id":e.customer_number,"Customer Name":e.customer_name,"Mobile Number":e.mobile_number,"Bank Name":e.name_of_bank,"Account Number":e.account_number,"IFSC Code":e.ifsc_code,Pan:e.pan,Plan:e.plan,"Registration Fee (Rs.)":e.registration_fee,"Commission From Date":e.commission_from_date,"Commission To Date":e.commission_to_date,"Level One Completion Status":e.level_one_completion_status,"Level One Completion Date":e.level_one_completion_date,"Level One Commission Amount":e.level_one_commission_amount,"Level One TDS Amount (10%)":e.level_one_tds_amount,"Level One Amount Payable":e.level_one_amount_payable,"Level One Commssion Payment Status":e.level_one_commission_paid_status,"Level One Commission Paid Date":e.level_one_commission_paid_date,"Level One Commission Payment Comments":e.level_one_payment_comments,"Level Two Completion Status":e.level_two_completion_status,"Level Two Completion Date":e.level_two_completion_date,"Level Two Commission Amount":e.level_two_commission_amount,"Level Two TDS Amount (10%)":e.level_two_tds_amount,"Level Two Amount Payable":e.level_two_amount_payable,"Level Two Commssion Payment Status":e.level_two_commission_paid_status,"Level Two Commission Paid Date":e.level_two_commission_paid_date,"Level Two Commission Payment Comments":e.level_two_payment_comments,"Level Three Completion Status":e.level_three_completion_status,"Level Three Completion Date":e.level_three_completion_date,"Level Three Commission Amount":e.level_three_commission_amount,"Level Three TDS Amount (10%)":e.level_three_tds_amount,"Level Three Amount Payable":e.level_three_amount_payable,"Level Three Commssion Payment Status":e.level_three_commission_paid_status,"Level Three Commission Paid Date":e.level_three_commission_paid_date,"Level Three Commission Payment Comments":e.level_three_payment_comments,"Level Four Completion Status":e.level_four_completion_status,"Level Four Completion Date":e.level_four_completion_date,"Level Four Commission Amount":e.level_four_commission_amount,"Level Four TDS Amount (10%)":e.level_four_tds_amount,"Level Four Amount Payable":e.level_four_amount_payable,"Level Four Commssion Payment Status":e.level_four_commission_paid_status,"Level Four Commission Paid Date":e.level_four_commission_paid_date,"Level Four Commission Payment Comments":e.level_four_payment_comments};t.push(O)}oe(t,s),q()};return(s,t)=>(D(),G(H,null,[n("div",te,[n("div",se,[ae,o(A,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=e=>_.value=e),style:{"max-width":"150px"},outlined:"",dense:"",autofocus:"",type:"date"},null,8,["modelValue"])]),n("div",ne,[me,o(A,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),style:{"max-width":"150px"},outlined:"",dense:"",autofocus:"",type:"date"},null,8,["modelValue"])]),n("div",ie,[re,o(x,{filled:"",dense:"",style:{width:"150px"},modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=e=>C.value=e),options:$.value},null,8,["modelValue","options"])]),n("div",ue,[_e,o(x,{filled:"",dense:"",style:{width:"200px"},modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e),options:U.value},null,8,["modelValue","options"])]),n("div",de,[o(v,{unelevated:"",color:"primary",label:"Search","no-caps":"",disable:N(B),onClick:V},null,8,["disable"])])]),n("div",ce,[o(v,{color:"green",class:"q-mb-md",style:{width:"20px"},"no-caps":"",onClick:z},{default:l(()=>[n("div",ve,[o(Q,{name:"fas fa-file-excel"}),pe])]),_:1}),o(W,{class:"commissions-table",flat:"",bordered:"",title:"Commissions",rows:T.value,columns:L.value,"row-key":"customer_number",filter:h.value,"visible-columns":S.value},{"top-right":l(()=>[y.value?(D(),k(A,{key:0,filled:"",borderless:"",dense:"",debounce:"300",modelValue:h.value,"onUpdate:modelValue":t[4]||(t[4]=e=>h.value=e),placeholder:"Search"},{append:l(()=>[o(Q,{name:"search"})]),_:1},8,["modelValue"])):R("",!0),o(v,{class:"q-ml-sm q-mr-sm",icon:"filter_list",onClick:t[5]||(t[5]=e=>y.value=!y.value),flat:""}),o(x,{modelValue:S.value,"onUpdate:modelValue":t[6]||(t[6]=e=>S.value=e),multiple:"",outlined:"",dense:"","options-dense":"","display-value":N(w).lang.table.columns,"emit-value":"","map-options":"",options:L.value,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])]),"body-cell-userStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:e.row.user_status==="Active"?"green":"orange","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.user_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelOneCompletionStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:e.row.level_one_completion_status==="Completed"?"green":"orange","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_one_completion_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelTwoCompletionStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:e.row.level_two_completion_status==="Completed"?"green":"orange","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_two_completion_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelThreeCompletionStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:e.row.level_three_completion_status==="Completed"?"green":"orange","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_three_completion_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelFourCompletionStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:e.row.level_four_completion_status==="Completed"?"green":"orange","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_four_completion_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelOneCommissionPaidStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:g(e.row.level_one_commission_paid_status),"text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_one_commission_paid_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelTwoCommissionPaidStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:g(e.row.level_two_commission_paid_status),"text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_two_commission_paid_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelThreeCommissionPaidStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:g(e.row.level_three_commission_paid_status),"text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_three_commission_paid_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-levelFourCommissionPaidStatus":l(e=>[o(m,{props:e},{default:l(()=>[o(u,{color:g(e.row.level_four_commission_paid_status),"text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:l(()=>[i(r(e.row.level_four_commission_paid_status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":l(e=>[o(m,{props:e},{default:l(()=>[o(v,{dense:"",round:"",flat:"",color:"primary",icon:"info"}),o(v,{dense:"",round:"",flat:"",color:"primary",onClick:O=>E(e),icon:"edit"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","visible-columns"])]),c.value?(D(),k(le,{key:0,modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e),"show-edit-commission-popup":c.value,"close-edit-commission-popup":M,"selected-data":P.value},null,8,["modelValue","show-edit-commission-popup","selected-data"])):R("",!0)],64))}};var ke=j(fe,[["__scopeId","data-v-53540b38"]]);export{ke as default};
